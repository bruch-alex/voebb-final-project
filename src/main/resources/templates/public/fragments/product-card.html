<div class="card mb-3" th:fragment="card(card)" style="width: 50rem;">
    <div class="card-header" th:text="'id: ' + ${card.id}"></div>
    <div class="card-body">
        
        <!-- âœ… Book Cover Image -->
        <div style="text-align: center;">
            <img th:src="${card.photo}"
                 alt="Book cover"
                 style="max-height: 250px; object-fit: contain; margin-bottom: 1rem;"
                 onerror="this.onerror=null; this.src='/images/default-book.jpg';" />
        </div>
        
        <a th:href="@{/products/{id}(id=${card.id})}"
           style="text-decoration: none; color: inherit;">
            <h4 class="card-title" th:text="${card.title}"></h4>
        </a>
        
        <p class="card-text"
           th:if="${card.mainCreators != null}"
           th:text="${card.mainCreators}"></p>
        
        <p class="card-text" th:text="'productType: ' + ${card.productType}"></p>
        
        <!-- Accordion -->
        <div class="accordion" th:id="'accordionProduct__' + ${card.id}">
            <div class="accordion-item">
                <h2 class="accordion-header" th:id="'headerLibrary__' + ${card.id}">
                    <button class="accordion-button collapsed"
                            type="button"
                            data-bs-toggle="collapse"
                            th:data-bs-target="'#collapseLibrary__' + ${card.id}"
                            th:aria-controls="'collapseLibrary__' + ${card.id}"
                            th:text="'Available in ' + ${card.locations.size()} + ' ' + (${card.locations.size() == 1} ? 'library' : 'libraries')">
                        Locations
                    </button>
                </h2>
                <div class="accordion-collapse collapse"
                     th:id="'collapseLibrary__' + ${card.id}"
                     th:attr="aria-labelledby='headerLibrary__' + ${card.id}">
                    <div class="accordion-body">
                        <div th:each="location : ${card.locations}">
                            <p th:text="'Location: ' + ${location.district} + ', ' + ${location.libraryName} + ', available items: ' + ${location.itemsCount}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
</div>
