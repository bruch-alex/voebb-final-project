<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title th:text="${'Libraries in ' + location + ' - VÖBB'}">Libraries by Location - VÖBB</title>
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/libraries.css}">
</head>
<body>
<!-- Include header fragment -->
<div th:replace="~{fragments/header :: header}"></div>

<div class="container">
  <div class="breadcrumb">
    <a th:href="@{/}" th:text="#{nav.home}">Home</a> &gt;
    <a th:href="@{/libraries}" th:text="#{libraries.title}">Libraries</a> &gt;
    <span th:text="${'Libraries in ' + location}">Libraries in Location</span>
  </div>

  <div class="page-header">
    <h1 th:text="${'Libraries in ' + location}">Libraries in Location</h1>
  </div>

  <!-- Libraries list -->
  <div class="library-list">
    <div th:if="${#lists.isEmpty(libraries)}" class="no-results">
      <p th:text="#{libraries.location.no.results(${location})}">No libraries found in this location</p>
    </div>

    <div th:each="library : ${libraries}" class="library-card">
      <h2 class="library-name">
        <a th:href="@{/libraries/{id}(id=${library.id})}" th:text="${library.name}">Library Name</a>
      </h2>
      <p class="library-address" th:text="${library.address}">Address</p>
      <p class="library-description" th:if="${library.description}" th:text="${#strings.abbreviate(library.description, 150)}">
        Library description...
      </p>
      <div class="library-actions">
        <a th:href="@{/libraries/{id}(id=${library.id})}" class="btn btn-primary" th:text="#{button.details}">Details</a>
        <div sec:authorize="hasRole('ADMIN')" class="admin-actions">
          <a th:href="@{/libraries/{id}/edit(id=${library.id})}" class="btn btn-secondary" th:text="#{button.edit}">Edit</a>
          <form th:action="@{/libraries/{id}/delete(id=${library.id})}" method="post" class="inline-form">
            <button type="submit" class="btn btn-danger" th:text="#{button.delete}"
                    onclick="return confirm('Are you sure you want to delete this library?')">Delete</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="actions">
    <a th:href="@{/libraries}" class="btn btn-primary" th:text="#{button.back}">Back to All Libraries</a>
  </div>
</div>

<!-- Include footer fragment -->
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>